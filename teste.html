<!DOCTYPE html>
<html>
<head>
  <title>Gráficos</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels"></script>
</head>
<body>
  <div style="width: 25%; float: left;">
    <canvas id="chart-finalizadoras"></canvas>
  </div>
  <div style="width: 25%; float: left;">
    <canvas id="chart-custo-lucro"></canvas>
  </div>
  <div style="width: 25%; float: left;">
    <canvas id="chart-vendas-vendedor"></canvas>
  </div>
  <div style="width: 25%; float: left;">
    <canvas id="chart-comparativo-semanal"></canvas>
  </div>

  <script>
    const dataFinalizadoras = {
      labels: ['Dinheiro', 'Pix', 'C.Credito', 'C.Debito', 'Boleto', 'A Prazo', 'Trnsf.Bancaria'],
      datasets: [{
        data: [1500, 2000, 3000, 600, 800, 454, 745],
        borderWidth: 1,
        cutout: '60%',
      }]
    };

    const configFinalizadoras = {
      type: 'doughnut',
      data: dataFinalizadoras,
      options: {
        plugins: {
          tooltip: {
            enabled: true // Desabilita os tooltips
          },
          datalabels: {
            color: 'black',
            anchor: 'center',
            align:'end',
            formatter: (value, context) => {
              const labels = context.chart.data.labels; // Obtém as etiquetas das formas de pagamento
              const datapoints = context.chart.data.datasets[0].data;

              function totalSum(total, datapoint) {
                return total + datapoint;
              }

              const totalValue = datapoints.reduce(totalSum, 0);
              const percentageValue = ((value / totalValue) * 100).toFixed(1);
              const label = labels[context.dataIndex]; // Obtém o nome da forma de pagamento correspondente ao rótulo atual
              const display = [`${label}: R$${value} (${percentageValue}%)`]; // Adiciona o nome, valor e porcentagem ao rótulo
              return display;
            }
          }
        },
        responsive: true,
        maintainAspectRatio: false
      },
      plugins: [ChartDataLabels]
    };

    const myChartFinalizadoras = new Chart(
      document.getElementById('chart-finalizadoras'),
      configFinalizadoras
    );

    const dataCustoLucro = {
      labels: ['Custo', 'Lucro'],
      datasets: [{
        data: [5000, 3000],
        borderWidth: 1,
        cutout: '60%',
      }]
    };

    const configCustoLucro = {
      type: 'doughnut',
      data: dataCustoLucro,
      options: {
        plugins: {
          tooltip: {
            enabled: true // Desabilita os tooltips
          },
          datalabels: {
            color: 'black',
            anchor: 'center',
            align:'end',
            formatter: (value, context) => {
              const labels = context.chart.data.labels; // Obtém as etiquetas de custo e lucro
              const datapoints = context.chart.data.datasets[0].data;

              function totalSum(total, datapoint) {
                return total + datapoint;
              }

              const totalValue = datapoints.reduce(totalSum, 0);
              const percentageValue = ((value / totalValue) * 100).toFixed(1);
              const label = labels[context.dataIndex]; // Obtém o nome de custo ou lucro correspondente ao rótulo atual
              const display = [`${label}: R$${value} (${percentageValue}%)`]; // Adiciona o nome, valor e porcentagem ao rótulo
              return display;
            }
          }
        },
        responsive: true,
        maintainAspectRatio: false
      },
      plugins: [ChartDataLabels]
    };

    const myChartCustoLucro = new Chart(
      document.getElementById('chart-custo-lucro'),
      configCustoLucro
    );

    const dataVendasVendedor = {
      labels: ['Vendedor 1', 'Vendedor 2', 'Vendedor 3', 'Vendedor 4', 'Vendedor 5'],
      datasets: [{
        data: [2500, 1800, 3200, 1500, 2800],
        borderWidth: 1,
        cutout: '60%',
      }]
    };

    const configVendasVendedor = {
      type: 'doughnut',
      data: dataVendasVendedor,
      options: {
        plugins: {
          tooltip: {
            enabled: true // Desabilita os tooltips
          },
          datalabels: {
            color: 'black',
            anchor: 'center',
            align:'end',
            formatter: (value, context) => {
              const labels = context.chart.data.labels; // Obtém as etiquetas dos vendedores
              const datapoints = context.chart.data.datasets[0].data;

              function totalSum(total, datapoint) {
                return total + datapoint;
              }

              const totalValue = datapoints.reduce(totalSum, 0);
              const percentageValue = ((value / totalValue) * 100).toFixed(1);
              const label = labels[context.dataIndex]; // Obtém o nome do vendedor correspondente ao rótulo atual
              const display = [`${label}: R$${value} (${percentageValue}%)`]; // Adiciona o nome, valor e porcentagem ao rótulo
              return display;
            }
          }
        },
        responsive: true,
        maintainAspectRatio: false
      },
      plugins: [ChartDataLabels]
    };

    const myChartVendasVendedor = new Chart(
      document.getElementById('chart-vendas-vendedor'),
      configVendasVendedor
    );

    const dataComparativoSemanal = {
      labels: ['Seg', 'Ter', 'Qua', 'Qui', 'Sex', 'Sáb', 'Dom'],
      datasets: [{
        data: [100, 150, 200, 180, 220, 250, 210],
        borderWidth: 1,
        cutout: '60%',
      }]
    };

    const configComparativoSemanal = {
      type: 'doughnut',
      data: dataComparativoSemanal,
      options: {
        plugins: {
          tooltip: {
            enabled: true // Desabilita os tooltips
          },
          datalabels: {
            color: 'black',
            anchor: 'center',
            align:'end',
            formatter: (value, context) => {
              const labels = context.chart.data.labels; // Obtém as etiquetas dos dias da semana
              const datapoints = context.chart.data.datasets[0].data;

              function totalSum(total, datapoint) {
                return total + datapoint;
              }

              const totalValue = datapoints.reduce(totalSum, 0);
              const percentageValue = ((value / totalValue) * 100).toFixed(1);
              const label = labels[context.dataIndex]; // Obtém o nome do dia da semana correspondente ao rótulo atual
              const display = [`${label}: ${value} vendas (${percentageValue}%)`]; // Adiciona o nome, valor e porcentagem ao rótulo
              return display;
            }
          }
        },
        responsive: true,
        maintainAspectRatio: false
      },
      plugins: [ChartDataLabels]
    };

    const myChartComparativoSemanal = new Chart(
      document.getElementById('chart-comparativo-semanal'),
      configComparativoSemanal
    );
  </script>
</body>
</html>
